<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>System Intelligence & Gap Resolution Report</title>

<style>
body {
    font-family: Segoe UI, Roboto, Arial, sans-serif;
    background: #0f172a;
    color: #e5e7eb;
    margin: 0;
}

header {
    background: #020617;
    padding: 16px 20px;
    border-bottom: 1px solid #1e293b;
}

h1 { margin: 0; font-size: 22px; }

.container { padding: 20px; }

.toolbar {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 16px;
}

.toolbar input,
.toolbar select,
.toolbar button {
    background: #020617;
    color: #e5e7eb;
    border: 1px solid #334155;
    padding: 8px 10px;
    border-radius: 4px;
}

.toolbar button:hover { background: #334155; cursor: pointer; }

.card {
    background: #020617;
    border: 1px solid #1e293b;
    border-radius: 8px;
    margin-bottom: 14px;
}

.card-header {
    padding: 12px 14px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-header:hover { background: #020617; }

.card-header span {
    font-weight: 600;
}

.badge {
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 12px;
}

.critical { background: #7f1d1d; color: #fecaca; }
.high { background: #78350f; color: #fde68a; }
.normal { background: #1e3a8a; color: #bfdbfe; }

.card-body {
    display: none;
    padding: 14px;
    border-top: 1px solid #1e293b;
}

.card.expanded .card-body { display: block; }

.location {
    font-size: 13px;
    color: #94a3b8;
    margin-bottom: 8px;
}

pre {
    background: #020617;
    border: 1px solid #334155;
    border-radius: 6px;
    padding: 12px;
    overflow-x: auto;
}

.diff-add { color: #22c55e; }

.action {
    margin-top: 12px;
    padding: 10px;
    border-left: 4px solid #f59e0b;
}

.secret { border-left-color: #ef4444; }

.button-bar button {
    margin-top: 8px;
    margin-right: 6px;
}
</style>
</head>

<body>

<header>
    <h1>System Intelligence & Gap Resolution Report</h1>
    <div class="location">3,142 files • ~1M LOC • Full analysis</div>
</header>

<div class="container">

<!-- TOOLBAR -->
<div class="toolbar">
    <input type="text" id="searchInput" placeholder="Search file, class, variable, key…">

    <select id="severityFilter">
        <option value="all">All Severities</option>
        <option value="critical">Critical</option>
        <option value="high">High</option>
        <option value="normal">Normal</option>
    </select>

    <select id="typeFilter">
        <option value="all">All Types</option>
        <option value="character">Character</option>
        <option value="variable">Variable</option>
        <option value="config">Config</option>
        <option value="secret">Secret</option>
    </select>

    <button onclick="expandAll()">Expand All</button>
    <button onclick="collapseAll()">Collapse All</button>
</div>

<!-- ISSUE CARD -->
<div class="card expanded" data-severity="critical" data-type="variable">
    <div class="card-header" onclick="toggleCard(this)">
        <span>Missing Variable: apiToken</span>
        <span class="badge critical">CRITICAL</span>
    </div>

    <div class="card-body">
        <div class="location">
            File: Services/AuthService.cs • Method: AuthenticateAsync • Line: 91
        </div>

        <pre>
new AuthenticationHeaderValue("Bearer", apiToken);
        </pre>

        <h4>Exact Fix</h4>
        <pre>
private readonly string apiToken;

public AuthService(IConfiguration configuration)
{
    apiToken = configuration["API_TOKEN"];
}
        </pre>

        <div class="action">
            API authentication fails → data fetch/post blocked.
            <div class="button-bar">
                <button>Apply Automatically</button>
                <button>Apply Manually</button>
                <button>Reject</button>
            </div>
        </div>
    </div>
</div>

<!-- SECRET CARD -->
<div class="card" data-severity="critical" data-type="secret">
    <div class="card-header" onclick="toggleCard(this)">
        <span>Secret Required: SALES_API_KEY</span>
        <span class="badge critical">CRITICAL</span>
    </div>

    <div class="card-body">
        <div class="location">
            File: Services/SalesApiClient.cs • Method: PostSaleAsync • Line: 88
        </div>

        <pre>
AuthenticationHeaderValue("Bearer", salesApiKey);
        </pre>

        <div class="action secret">
            This secret must be provided by you.
            <div class="button-bar">
                <button>Enter Secret</button>
                <button>Skip</button>
            </div>
        </div>
    </div>
</div>

</div>

<script>
function toggleCard(header) {
    header.parentElement.classList.toggle("expanded");
}

function expandAll() {
    document.querySelectorAll(".card").forEach(c => c.classList.add("expanded"));
}

function collapseAll() {
    document.querySelectorAll(".card").forEach(c => c.classList.remove("expanded"));
}

function applyFilters() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const severity = document.getElementById("severityFilter").value;
    const type = document.getElementById("typeFilter").value;

    document.querySelectorAll(".card").forEach(card => {
        const text = card.innerText.toLowerCase();
        const sevMatch = severity === "all" || card.dataset.severity === severity;
        const typeMatch = type === "all" || card.dataset.type === type;
        const searchMatch = text.includes(search);

        card.style.display = (sevMatch && typeMatch && searchMatch) ? "block" : "none";
    });
}

document.getElementById("searchInput").addEventListener("input", applyFilters);
document.getElementById("severityFilter").addEventListener("change", applyFilters);
document.getElementById("typeFilter").addEventListener("change", applyFilters);
</script>

</body>
</html>
